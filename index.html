<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Particle Sandbox</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="start-screen" id="startScreen">
        <div class="start-content">
            <h1 class="start-title">Particle Sandbox</h1>
            <div class="start-warning">
                <strong>Performance Warning</strong>
                This application is computationally intensive and may not run well on low-end PCs. High particle counts, weather effects, and VHS filters can cause significant performance issues.
            </div>
            <div class="start-credits">
                <strong>Created by empty? / emptyforce</strong><br>
                An interactive particle physics sandbox with advanced particle interactions.
            </div>
            <button class="start-button" onclick="startApplication()">Start</button>
        </div>
    </div>
    <canvas id="canvas" class="canvas-hidden"></canvas>
    <div class="controls controls-hidden" id="controlsPanel">
        <div class="controls-header">
            <h3><span>Particle Sandbox</span> <span class="stats" id="stats">0 particles | 60 FPS</span></h3>
            <button class="minimize-btn" id="minimizeBtn" onclick="toggleMinimize()">−</button>
        </div>
        
        <div class="section">
            <div class="section-title" onclick="toggleSection(this)">Map</div>
            <div class="section-content">
            <div class="control-group">
                <label>Map: <span class="value-display" id="mapValue">Void</span></label>
                <select id="mapSelector">
                    <option value="void">Void</option>
                    <option value="earth">Earth</option>
                    <option value="space">Space</option>
                    <option value="moon">Moon</option>
                    <option value="mars">Mars</option>
                    <option value="white">White Room</option>
                    <option value="green">Green Room</option>
                </select>
            </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title" onclick="toggleSection(this)">Spawn</div>
            <div class="section-content">
            <div class="control-group">
                <label>Mode: <span class="value-display" id="modeValue">Click & Drag</span></label>
                <select id="mode">
                    <option value="click">Click & Drag</option>
                    <option value="auto">Auto Spawn</option>
                    <option value="explosion">Explosion</option>
                    <option value="fountain">Fountain</option>
                    <option value="spiral">Spiral</option>
                    <option value="rain">Rain</option>
                </select>
            </div>
            <div class="control-group">
                <label>Particle Count: <span class="value-display" id="countValue">20</span></label>
                <div class="input-wrapper">
                <input type="range" id="count" min="1" max="200" value="20">
                    <input type="number" id="countInput" min="1" max="200" value="20">
                </div>
            </div>
            <div class="control-group">
                <label>Speed: <span class="value-display" id="speedValue">1.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="speed" min="0.1" max="5" step="0.1" value="1.0">
                    <input type="number" id="speedInput" min="0.1" max="5" step="0.1" value="1.0">
                </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Particle</div>
            <div class="section-content">
            <div class="control-group">
                <label>Size: <span class="value-display" id="sizeValue">3</span></label>
                <div class="input-wrapper">
                <input type="range" id="size" min="1" max="20" value="3">
                    <input type="number" id="sizeInput" min="1" max="20" value="3">
                </div>
            </div>
            <div class="control-group">
                <label>Lifetime: <span class="value-display" id="lifetimeValue">100</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="lifetime" min="10" max="200" value="100">
                    <input type="number" id="lifetimeInput" min="10" max="200" value="100">
                </div>
            </div>
            <div class="control-group">
                <label>Trail Length: <span class="value-display" id="trailValue">5</span></label>
                <div class="input-wrapper">
                <input type="range" id="trail" min="0" max="20" value="5">
                    <input type="number" id="trailInput" min="0" max="20" value="5">
                </div>
            </div>
            <div id="purchasedEffectsContainer" class="purchased-effects-container"></div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title" onclick="toggleSection(this)">Physics</div>
            <div class="section-content">
            <div class="control-group">
                <label>Gravity: <span class="value-display" id="gravityValue">0.1</span></label>
                <div class="input-wrapper">
                <input type="range" id="gravity" min="0" max="1" step="0.05" value="0.1">
                    <input type="number" id="gravityInput" min="0" max="1" step="0.05" value="0.1">
                </div>
            </div>
            <div class="control-group">
                <label>Friction: <span class="value-display" id="frictionValue">0.99</span></label>
                <div class="input-wrapper">
                <input type="range" id="friction" min="0.85" max="1" step="0.01" value="0.99">
                    <input type="number" id="frictionInput" min="0.85" max="1" step="0.01" value="0.99">
                </div>
            </div>
            <div class="control-group">
                <label>Interaction: <span class="value-display" id="interactionValue">0.5</span></label>
                <div class="input-wrapper">
                <input type="range" id="interaction" min="0" max="3" step="0.1" value="0.5">
                    <input type="number" id="interactionInput" min="0" max="3" step="0.1" value="0.5">
                </div>
            </div>
            <div class="control-group">
                <label>Mouse Force: <span class="value-display" id="mouseForceValue">1.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="mouseForce" min="0" max="5" step="0.1" value="1.0">
                    <input type="number" id="mouseForceInput" min="0" max="5" step="0.1" value="1.0">
                </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Visual</div>
            <div class="section-content">
            <div class="control-group">
                <label>Shape: <span class="value-display" id="shapeValue">Circle</span></label>
                <select id="shape">
                    <option value="circle">Circle</option>
                    <option value="square">Square</option>
                    <option value="triangle">Triangle</option>
                    <option value="star">Star</option>
                    <option value="line">Line</option>
                </select>
            </div>
            <div class="control-group">
                <label>Size Variation: <span class="value-display" id="sizeVarValue">50</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="sizeVar" min="0" max="100" value="50">
                    <input type="number" id="sizeVarInput" min="0" max="100" value="50">
                </div>
            </div>
            <div class="control-group">
                <label>Connection Distance: <span class="value-display" id="distanceValue">100</span></label>
                <div class="input-wrapper">
                <input type="range" id="distance" min="0" max="300" value="100">
                    <input type="number" id="distanceInput" min="0" max="300" value="100">
                </div>
            </div>
            <div class="control-group">
                <label>Trail Opacity: <span class="value-display" id="trailOpacityValue">0.3</span></label>
                <div class="input-wrapper">
                <input type="range" id="trailOpacity" min="0" max="1" step="0.05" value="0.3">
                    <input type="number" id="trailOpacityInput" min="0" max="1" step="0.05" value="0.3">
            </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Advanced Physics</div>
            <div class="section-content">
            <div class="control-group">
                <label>Wind X: <span class="value-display" id="windXValue">0.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="windX" min="-2" max="2" step="0.1" value="0">
                    <input type="number" id="windXInput" min="-2" max="2" step="0.1" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Wind Y: <span class="value-display" id="windYValue">0.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="windY" min="-2" max="2" step="0.1" value="0">
                    <input type="number" id="windYInput" min="-2" max="2" step="0.1" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Collisions: <span class="value-display" id="collisionValue">OFF</span></label>
                <select id="collisions">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Bounce: <span class="value-display" id="bounceValue">0.8</span></label>
                <div class="input-wrapper">
                <input type="range" id="bounce" min="0" max="1" step="0.1" value="0.8">
                    <input type="number" id="bounceInput" min="0" max="1" step="0.1" value="0.8">
                </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Emitter</div>
            <div class="section-content">
            <div class="control-group">
                <label>Emitter: <span class="value-display" id="emitterValue">OFF</span></label>
                <select id="emitter">
                    <option value="off">OFF</option>
                    <option value="mouse">Mouse</option>
                    <option value="center">Center</option>
                    <option value="random">Random</option>
                </select>
            </div>
            <div class="control-group">
                <label>Emit Rate: <span class="value-display" id="emitRateValue">5</span></label>
                <div class="input-wrapper">
                <input type="range" id="emitRate" min="1" max="50" value="5">
                    <input type="number" id="emitRateInput" min="1" max="50" value="5">
                </div>
            </div>
            </div>
        </div>
        
        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Colors</div>
            <div class="section-content">
            <div class="control-group">
                <label>Color Mode: <span class="value-display" id="colorModeValue">Single</span></label>
                <select id="colorMode">
                    <option value="single">Single</option>
                    <option value="random">Random</option>
                    <option value="gradient">Gradient</option>
                    <option value="rainbow">Rainbow</option>
                    <option value="age">Age-based</option>
                    <option value="velocity">Velocity-based</option>
                </select>
            </div>
            <div class="control-group">
                <label>Custom Color:</label>
                <div class="color-picker-wrapper">
                    <input type="color" id="customColor" value="#4a9eff" title="Click to open color picker">
                    <input type="text" id="customColorText" value="#4a9eff" placeholder="#4a9eff" maxlength="7" title="Type hex color code">
                </div>
                <div id="purchasedColorsContainer" class="purchased-colors-container"></div>
            </div>
            <div id="colorPalette"></div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Field Forces</div>
            <div class="section-content">
            <div class="control-group">
                <label>Magnetic Field: <span class="value-display" id="magneticValue">0.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="magnetic" min="0" max="5" step="0.1" value="0">
                    <input type="number" id="magneticInput" min="0" max="5" step="0.1" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Vortex Strength: <span class="value-display" id="vortexValue">0.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="vortex" min="0" max="5" step="0.1" value="0">
                    <input type="number" id="vortexInput" min="0" max="5" step="0.1" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Noise: <span class="value-display" id="noiseValue">0.0</span></label>
                <div class="input-wrapper">
                <input type="range" id="noise" min="0" max="2" step="0.1" value="0">
                    <input type="number" id="noiseInput" min="0" max="2" step="0.1" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Flocking: <span class="value-display" id="flockingValue">OFF</span></label>
                <select id="flocking">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Particle Aging</div>
            <div class="section-content">
            <div class="control-group">
                <label>Size Over Lifetime: <span class="value-display" id="sizeOverLifeValue">OFF</span></label>
                <select id="sizeOverLife">
                    <option value="off">OFF</option>
                    <option value="shrink">Shrink</option>
                    <option value="grow">Grow</option>
                    <option value="pulse">Pulse</option>
                </select>
            </div>
            <div class="control-group">
                <label>Color Over Lifetime: <span class="value-display" id="colorOverLifeValue">OFF</span></label>
                <select id="colorOverLife">
                    <option value="off">OFF</option>
                    <option value="fade">Fade</option>
                    <option value="shift">Color Shift</option>
                    <option value="heat">Heat Map</option>
                </select>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Rendering</div>
            <div class="section-content">
            <div class="control-group">
                <label>Blend Mode: <span class="value-display" id="blendValue">Normal</span></label>
                <select id="blendMode">
                    <option value="normal">Normal</option>
                    <option value="screen">Screen</option>
                    <option value="multiply">Multiply</option>
                    <option value="overlay">Overlay</option>
                    <option value="lighten">Lighten</option>
                    <option value="darken">Darken</option>
                </select>
            </div>
            <div class="control-group">
                <label>Show Velocity: <span class="value-display" id="velocityVizValue">OFF</span></label>
                <select id="velocityViz">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Max Particles: <span class="value-display" id="maxParticlesValue">10000</span></label>
                <div class="input-wrapper">
                <input type="range" id="maxParticles" min="100" max="50000" step="100" value="10000">
                    <input type="number" id="maxParticlesInput" min="100" max="50000" step="100" value="10000">
                </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">VHS / Retro Effects</div>
            <div class="section-content">
            <div class="control-group">
                <label>VHS Mode: <span class="value-display" id="vhsModeValue">OFF</span></label>
                <select id="vhsMode">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Scanlines: <span class="value-display" id="scanlinesValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="scanlines" min="0" max="100" value="0">
                    <input type="number" id="scanlinesInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Chromatic Aberration: <span class="value-display" id="chromaticValue">0</span></label>
                <div class="input-wrapper">
                <input type="range" id="chromatic" min="0" max="10" step="0.5" value="0">
                    <input type="number" id="chromaticInput" min="0" max="10" step="0.5" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Film Grain: <span class="value-display" id="grainValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="grain" min="0" max="100" value="0">
                    <input type="number" id="grainInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>VHS Tracking: <span class="value-display" id="trackingValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="tracking" min="0" max="100" value="0">
                    <input type="number" id="trackingInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Static Noise: <span class="value-display" id="staticValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="static" min="0" max="100" value="0">
                    <input type="number" id="staticInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Color Bleed: <span class="value-display" id="bleedValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="bleed" min="0" max="100" value="0">
                    <input type="number" id="bleedInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>CRT Curvature: <span class="value-display" id="curvatureValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="curvature" min="0" max="100" value="0">
                    <input type="number" id="curvatureInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>VHS Glitch: <span class="value-display" id="glitchValue">0</span>%</label>
                <div class="input-wrapper">
                <input type="range" id="glitch" min="0" max="100" value="0">
                    <input type="number" id="glitchInput" min="0" max="100" value="0">
                </div>
            </div>
            <div class="control-group">
                <label>Pixelation: <span class="value-display" id="pixelationValue">OFF</span></label>
                <select id="pixelation">
                    <option value="off">OFF</option>
                    <option value="1">1-bit</option>
                    <option value="2">2-bit</option>
                    <option value="4">4-bit</option>
                    <option value="8">8-bit</option>
                    <option value="16">16-bit</option>
                </select>
            </div>
            <div class="control-group">
                <label>Pixel Size: <span class="value-display" id="pixelSizeValue">4</span></label>
                <div class="input-wrapper">
                    <input type="range" id="pixelSize" min="1" max="32" value="4">
                    <input type="number" id="pixelSizeInput" min="1" max="32" value="4">
                </div>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Gravitational Waves</div>
            <div class="section-content">
            <div class="control-group">
                <label>Gravitational Waves: <span class="value-display" id="gravWavesEnabledValue">OFF</span></label>
                <select id="gravWavesEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Black Holes: <span class="value-display" id="blackHoleCountValue">3</span></label>
                <div class="input-wrapper">
                    <input type="range" id="blackHoleCount" min="1" max="10" value="3">
                    <input type="number" id="blackHoleCountInput" min="1" max="10" value="3">
                </div>
            </div>
            <div class="control-group">
                <label>Black Hole Strength: <span class="value-display" id="blackHoleStrengthValue">50.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="blackHoleStrength" min="10" max="200" step="5" value="50">
                    <input type="number" id="blackHoleStrengthInput" min="10" max="200" step="5" value="50">
                </div>
            </div>
            <div class="control-group">
                <label>Event Horizon Size: <span class="value-display" id="eventHorizonSizeValue">30</span></label>
                <div class="input-wrapper">
                    <input type="range" id="eventHorizonSize" min="10" max="100" step="5" value="30">
                    <input type="number" id="eventHorizonSizeInput" min="10" max="100" step="5" value="30">
                </div>
            </div>
            <div class="control-group">
                <label>Wave Intensity: <span class="value-display" id="waveIntensityValue">5.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="waveIntensity" min="0" max="20" step="0.5" value="5">
                    <input type="number" id="waveIntensityInput" min="0" max="20" step="0.5" value="5">
                </div>
            </div>
            </div>
        </div>
        
        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Building Toolbox</div>
            <div class="section-content">
            <div class="control-group">
                <label>Building Mode: <span class="value-display" id="buildingModeValue">OFF</span></label>
                <select id="buildingMode">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Selected Block: <span class="value-display" id="selectedBlockValue">Square</span></label>
                <select id="blockType">
                    <option value="square">Square</option>
                    <option value="rectangle">Rectangle</option>
                    <option value="circle">Circle</option>
                    <option value="triangle">Triangle</option>
                    <option value="hexagon">Hexagon</option>
                    <option value="star">Star</option>
                    <option value="conveyor">Conveyor Belt</option>
                </select>
            </div>
            <div class="control-group">
                <label>Block Size: <span class="value-display" id="blockSizeValue">30</span></label>
                <div class="input-wrapper">
                    <input type="range" id="blockSize" min="10" max="100" step="5" value="30">
                    <input type="number" id="blockSizeInput" min="10" max="100" step="5" value="30">
                </div>
            </div>
            <div class="control-group">
                <label>Block Color: <span class="value-display" id="blockColorValue">#4a9eff</span></label>
                <input type="color" id="blockColorPicker" value="#4a9eff">
            </div>
            <div class="control-group">
                <label>Snap to Grid: <span class="value-display" id="snapToGridValue">ON</span></label>
                <select id="snapToGrid">
                    <option value="on">ON</option>
                    <option value="off">OFF</option>
                </select>
            </div>
            <div class="control-group">
                <label>Grid Size: <span class="value-display" id="gridSizeValue">20</span></label>
                <div class="input-wrapper">
                    <input type="range" id="gridSize" min="5" max="50" step="5" value="20">
                    <input type="number" id="gridSizeInput" min="5" max="50" step="5" value="20">
                </div>
            </div>
            <div class="control-group">
                <label>Block Physics: <span class="value-display" id="blockPhysicsValue">OFF</span></label>
                <select id="blockPhysics">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Block Type: <span class="value-display" id="blockMaterialValue">Solid</span></label>
                <select id="blockMaterial">
                    <option value="solid">Solid</option>
                    <option value="breakable">Breakable</option>
                </select>
            </div>
            <div class="button-group" style="margin-top: 15px;">
                <button onclick="clearAllBlocks()">Clear All Blocks</button>
                <button onclick="removeLastBlock()">Remove Last</button>
            </div>
            <div class="control-group">
                <label>Conveyor Speed: <span class="value-display" id="conveyorSpeedValue">2.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="conveyorSpeed" min="0.5" max="10" step="0.5" value="2.0">
                    <input type="number" id="conveyorSpeedInput" min="0.5" max="10" step="0.5" value="2.0">
                </div>
            </div>
            <div class="control-group">
                <label>Conveyor Direction: <span class="value-display" id="conveyorDirectionValue">Right</span></label>
                <select id="conveyorDirection">
                    <option value="right">Right</option>
                    <option value="left">Left</option>
                    <option value="up">Up</option>
                    <option value="down">Down</option>
                </select>
            </div>
            <div class="control-group" style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                <label style="font-weight: bold; color: #fff;">Ragdoll</label>
            </div>
            <div class="button-group" style="margin-top: 10px;">
                <button onclick="spawnRagdoll()">Spawn Ragdoll</button>
                <button onclick="clearRagdolls()">Clear Ragdolls</button>
            </div>
            <div class="control-group" style="margin-top: 15px;">
                <label style="font-size: 12px; color: #aaa;">Click to place blocks/conveyors. Click and drag ragdolls to grab/throw them.</label>
            </div>
            </div>
        </div>
        
        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Weather</div>
            <div class="section-content">
            <div class="control-group">
                <label>Tornado: <span class="value-display" id="tornadoEnabledValue">OFF</span></label>
                <select id="tornadoEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Tornado Strength: <span class="value-display" id="tornadoStrengthValue">5.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tornadoStrength" min="1" max="10" step="0.5" value="5.0">
                    <input type="number" id="tornadoStrengthInput" min="1" max="10" step="0.5" value="5.0">
                </div>
            </div>
            <div class="control-group">
                <label>Tornado Speed: <span class="value-display" id="tornadoSpeedValue">2.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tornadoSpeed" min="0.5" max="5" step="0.1" value="2.0">
                    <input type="number" id="tornadoSpeedInput" min="0.5" max="5" step="0.1" value="2.0">
                </div>
            </div>
            <div class="control-group">
                <label>Tornado Size: <span class="value-display" id="tornadoSizeValue">150</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tornadoSize" min="50" max="300" step="10" value="150">
                    <input type="number" id="tornadoSizeInput" min="50" max="300" step="10" value="150">
                </div>
            </div>
            <div class="control-group">
                <label>Tsunami: <span class="value-display" id="tsunamiEnabledValue">OFF</span></label>
                <select id="tsunamiEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Tsunami Strength: <span class="value-display" id="tsunamiStrengthValue">3.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tsunamiStrength" min="1" max="10" step="0.5" value="3.0">
                    <input type="number" id="tsunamiStrengthInput" min="1" max="10" step="0.5" value="3.0">
                </div>
            </div>
            <div class="control-group">
                <label>Tsunami Speed: <span class="value-display" id="tsunamiSpeedValue">2.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tsunamiSpeed" min="0.5" max="5" step="0.1" value="2.0">
                    <input type="number" id="tsunamiSpeedInput" min="0.5" max="5" step="0.1" value="2.0">
                </div>
            </div>
            <div class="control-group">
                <label>Tsunami Size: <span class="value-display" id="tsunamiSizeValue">150</span></label>
                <div class="input-wrapper">
                    <input type="range" id="tsunamiSize" min="50" max="300" step="10" value="150">
                    <input type="number" id="tsunamiSizeInput" min="50" max="300" step="10" value="150">
                </div>
            </div>
            <div class="control-group">
                <label>Volcano: <span class="value-display" id="volcanoEnabledValue">OFF</span></label>
                <select id="volcanoEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Volcano Intensity: <span class="value-display" id="volcanoIntensityValue">5.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="volcanoIntensity" min="1" max="10" step="0.5" value="5.0">
                    <input type="number" id="volcanoIntensityInput" min="1" max="10" step="0.5" value="5.0">
                </div>
            </div>
            <div class="control-group">
                <label>Volcano Speed: <span class="value-display" id="volcanoSpeedValue">1.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="volcanoSpeed" min="0.5" max="5" step="0.1" value="1.0">
                    <input type="number" id="volcanoSpeedInput" min="0.5" max="5" step="0.1" value="1.0">
                </div>
            </div>
            <div class="control-group">
                <label>Volcano Size: <span class="value-display" id="volcanoSizeValue">200</span></label>
                <div class="input-wrapper">
                    <input type="range" id="volcanoSize" min="50" max="400" step="10" value="200">
                    <input type="number" id="volcanoSizeInput" min="50" max="400" step="10" value="200">
                </div>
            </div>
            <div class="control-group">
                <label>Thunder: <span class="value-display" id="thunderEnabledValue">OFF</span></label>
                <select id="thunderEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Thunder Frequency: <span class="value-display" id="thunderFreqValue">2.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="thunderFreq" min="0.5" max="5" step="0.1" value="2.0">
                    <input type="number" id="thunderFreqInput" min="0.5" max="5" step="0.1" value="2.0">
                </div>
            </div>
            <div class="control-group">
                <label>Thunder Strength: <span class="value-display" id="thunderStrengthValue">5.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="thunderStrength" min="1" max="10" step="0.5" value="5.0">
                    <input type="number" id="thunderStrengthInput" min="1" max="10" step="0.5" value="5.0">
                </div>
            </div>
            <div class="control-group">
                <label>Thunder Size: <span class="value-display" id="thunderSizeValue">100</span></label>
                <div class="input-wrapper">
                    <input type="range" id="thunderSize" min="50" max="300" step="10" value="100">
                    <input type="number" id="thunderSizeInput" min="50" max="300" step="10" value="100">
                </div>
            </div>
            <div class="control-group">
                <label>Rain: <span class="value-display" id="rainEnabledValue">OFF</span></label>
                <select id="rainEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Rain Intensity: <span class="value-display" id="rainIntensityValue">3.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="rainIntensity" min="1" max="10" step="0.5" value="3.0">
                    <input type="number" id="rainIntensityInput" min="1" max="10" step="0.5" value="3.0">
                </div>
            </div>
            <div class="control-group">
                <label>Rain Speed: <span class="value-display" id="rainSpeedValue">3.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="rainSpeed" min="0.5" max="8" step="0.1" value="3.0">
                    <input type="number" id="rainSpeedInput" min="0.5" max="8" step="0.1" value="3.0">
                </div>
            </div>
            <div class="control-group">
                <label>Rain Size: <span class="value-display" id="rainSizeValue">15</span></label>
                <div class="input-wrapper">
                    <input type="range" id="rainSize" min="5" max="30" step="1" value="15">
                    <input type="number" id="rainSizeInput" min="5" max="30" step="1" value="15">
                </div>
            </div>
            <div class="control-group">
                <label>Snow: <span class="value-display" id="snowEnabledValue">OFF</span></label>
                <select id="snowEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Snow Intensity: <span class="value-display" id="snowIntensityValue">2.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="snowIntensity" min="1" max="10" step="0.5" value="2.0">
                    <input type="number" id="snowIntensityInput" min="1" max="10" step="0.5" value="2.0">
                </div>
            </div>
            <div class="control-group">
                <label>Snow Speed: <span class="value-display" id="snowSpeedValue">1.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="snowSpeed" min="0.3" max="3" step="0.1" value="1.0">
                    <input type="number" id="snowSpeedInput" min="0.3" max="3" step="0.1" value="1.0">
                </div>
            </div>
            <div class="control-group">
                <label>Snow Size: <span class="value-display" id="snowSizeValue">3</span></label>
                <div class="input-wrapper">
                    <input type="range" id="snowSize" min="1" max="8" step="0.5" value="3">
                    <input type="number" id="snowSizeInput" min="1" max="8" step="0.5" value="3">
                </div>
            </div>
            <div class="control-group">
                <label>Hurricane: <span class="value-display" id="hurricaneEnabledValue">OFF</span></label>
                <select id="hurricaneEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Hurricane Strength: <span class="value-display" id="hurricaneStrengthValue">6.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="hurricaneStrength" min="1" max="10" step="0.5" value="6.0">
                    <input type="number" id="hurricaneStrengthInput" min="1" max="10" step="0.5" value="6.0">
                </div>
            </div>
            <div class="control-group">
                <label>Hurricane Speed: <span class="value-display" id="hurricaneSpeedValue">0.5</span></label>
                <div class="input-wrapper">
                    <input type="range" id="hurricaneSpeed" min="0.1" max="2" step="0.1" value="0.5">
                    <input type="number" id="hurricaneSpeedInput" min="0.1" max="2" step="0.1" value="0.5">
                </div>
            </div>
            <div class="control-group">
                <label>Hurricane Size: <span class="value-display" id="hurricaneSizeValue">300</span></label>
                <div class="input-wrapper">
                    <input type="range" id="hurricaneSize" min="100" max="600" step="20" value="300">
                    <input type="number" id="hurricaneSizeInput" min="100" max="600" step="20" value="300">
                </div>
            </div>
            <div class="control-group">
                <label>Earthquake: <span class="value-display" id="earthquakeEnabledValue">OFF</span></label>
                <select id="earthquakeEnabled">
                    <option value="off">OFF</option>
                    <option value="on">ON</option>
                </select>
            </div>
            <div class="control-group">
                <label>Earthquake Intensity: <span class="value-display" id="earthquakeIntensityValue">3.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="earthquakeIntensity" min="1" max="10" step="0.5" value="3.0">
                    <input type="number" id="earthquakeIntensityInput" min="1" max="10" step="0.5" value="3.0">
                </div>
            </div>
            <div class="control-group">
                <label>Earthquake Speed: <span class="value-display" id="earthquakeSpeedValue">1.0</span></label>
                <div class="input-wrapper">
                    <input type="range" id="earthquakeSpeed" min="0.5" max="3" step="0.1" value="1.0">
                    <input type="number" id="earthquakeSpeedInput" min="0.5" max="3" step="0.1" value="1.0">
                </div>
            </div>
            <div class="control-group">
                <label>Earthquake Range: <span class="value-display" id="earthquakeRangeValue">100</span></label>
                <div class="input-wrapper">
                    <input type="range" id="earthquakeRange" min="50" max="300" step="10" value="100">
                    <input type="number" id="earthquakeRangeInput" min="50" max="300" step="10" value="100">
                </div>
            </div>
            </div>
        </div>
        
        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Presets</div>
            <div class="section-content">
            <div class="preset-grid">
                <button onclick="loadPreset('fireworks')">Fireworks</button>
                <button onclick="loadPreset('galaxy')">Galaxy</button>
                <button onclick="loadPreset('plasma')">Plasma</button>
                <button onclick="loadPreset('vortex')">Vortex</button>
                <button onclick="loadPreset('flocking')">Flocking</button>
                <button onclick="loadPreset('magnetic')">Magnetic</button>
                <button onclick="loadPreset('chaos')">Chaos</button>
                <button onclick="loadPreset('nebula')">Nebula</button>
                <button onclick="loadPreset('stars')">Stars</button>
                <button onclick="loadPreset('smoke')">Smoke</button>
                <button onclick="loadPreset('bubbles')">Bubbles</button>
                <button onclick="loadPreset('sparkles')">Sparkles</button>
                <button onclick="loadPreset('aurora')">Aurora</button>
                <button onclick="loadPreset('energy')">Energy</button>
            </div>
            </div>
        </div>

        <div class="section collapsed">
            <div class="section-title" onclick="toggleSection(this)">Save/Load</div>
            <div class="section-content">
            <div class="button-group">
                <button onclick="saveConfig()">Save Config</button>
                <button onclick="loadConfig()">Load Config</button>
            </div>
            <div class="button-group">
                <button onclick="exportImage()">Export Image</button>
                <button onclick="exportGIF()">Export GIF</button>
            </div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title" onclick="toggleSection(this)">Controls</div>
            <div class="section-content">
            <div class="button-group">
                <button id="physicsBtn" onclick="togglePhysics()">Physics: ON</button>
                <button id="connectionsBtn" onclick="toggleConnections()">Connections: ON</button>
            </div>
            <div class="button-group">
                <button onclick="clearParticles()">Clear</button>
                <button onclick="resetSettings()">Reset</button>
            </div>
            <div class="button-group">
                <button id="devModeBtn" onclick="toggleDevMode()" style="background: #ff4444; color: white;">Dev Mode: OFF</button>
                <button id="disableWarningsBtn" onclick="toggleWarnings()" style="background: rgba(255, 165, 0, 0.3); color: white; border: 1px solid rgba(255, 165, 0, 0.5);">Warnings: ON</button>
                <button id="openShopBtn" onclick="openShop()" style="background: rgba(74, 158, 255, 0.3); color: white; border: 1px solid rgba(74, 158, 255, 0.5);">Open Shop</button>
            </div>
            </div>
        </div>

        <div class="info">
            Left-click: Spawn particles<br>
            Drag: Create trails<br>
            Right-click: Repel particles<br>
            Middle-click: Attract particles
        </div>
        </div>
    </div>

    <div id="shopModal" class="shop-modal hidden">
        <div class="shop-content">
            <div class="shop-header">
                <h2>Coscoins Shop</h2>
                <div class="shop-currency">
                    <img src="assets/coscoin.png" alt="Coscoin" class="currency-icon-img">
                    <span id="coscoinsDisplay">0</span> Coscoins
                </div>
                <button class="shop-close" onclick="closeShop()">×</button>
            </div>
            <div class="shop-tabs">
                <button class="shop-tab active" onclick="switchShopTab('effects')">Effects</button>
                <button class="shop-tab" onclick="switchShopTab('colors')">Colors</button>
                <button class="shop-tab" onclick="switchShopTab('themes')">Themes</button>
                <button class="shop-tab" onclick="switchShopTab('environments')">Environments</button>
            </div>
            <div class="shop-items" id="shopItems">
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
